<section class="testimonials" data-section-id="{{ section.id }}" data-section-type="testimonials">
  <div class="testimonials__container container">
    
    {% if section.settings.heading != blank %}
      <div class="testimonials__header" data-aos="fade-up">
        <h2 class="testimonials__title h2">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="testimonials__subtitle">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="testimonials__grid">
      {% for block in section.blocks %}
        {% if block.type == 'testimonial' %}
          <div class="testimonial-card" data-aos="fade-up" data-aos-delay="{{ forloop.index0 | times: 100 }}" {{ block.shopify_attributes }}>
            <div class="testimonial-card__stars">
              {% for i in (1..5) %}
                <svg width="20" height="20" viewBox="0 0 20 20" fill="#FFD700">
                  <path d="M10 0L12.09 6.26L19 7.27L14 12.14L15.18 19.02L10 15.77L4.82 19.02L6 12.14L1 7.27L7.91 6.26L10 0Z"/>
                </svg>
              {% endfor %}
            </div>
            <blockquote class="testimonial-card__quote">
              "{{ block.settings.quote }}"
            </blockquote>
            <div class="testimonial-card__author">
              <strong>{{ block.settings.author }}</strong>
              {% if block.settings.author_title != blank %}
                <span>{{ block.settings.author_title }}</span>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .testimonials {
    padding: var(--spacing-xl) 0;
    background-color: var(--color-white);
  }
  
  .testimonials__header {
    text-align: center;
    max-width: 700px;
    margin: 0 auto var(--spacing-lg);
  }
  
  .testimonials__subtitle {
    font-size: 1.25rem;
    color: var(--color-text-light);
  }
  
  .testimonials__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
  
  @media (min-width: 768px) {
    .testimonials__grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  .testimonial-card {
    background-color: var(--color-secondary);
    padding: var(--spacing-lg);
    border-radius: var(--radius-lg);
  }
  
  .testimonial-card__stars {
    display: flex;
    gap: 4px;
    margin-bottom: var(--spacing-sm);
  }
  
  .testimonial-card__quote {
    font-size: 1.125rem;
    line-height: 1.7;
    color: var(--color-text);
    margin-bottom: var(--spacing-md);
    font-style: italic;
  }
  
  .testimonial-card__author {
    display: flex;
    flex-direction: column;
  }
  
  .testimonial-card__author strong {
    color: var(--color-dark);
    font-weight: 600;
  }
  
  .testimonial-card__author span {
    color: var(--color-text-light);
    font-size: 0.875rem;
  }
</style>

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Lo que dicen nuestros clientes"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "Excelente producto, ha mejorado mi productividad enormemente."
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author Name",
          "default": "María García"
        },
        {
          "type": "text",
          "id": "author_title",
          "label": "Author Title",
          "default": "Diseñadora UX"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        }
      ]
    }
  ]
}
{% endschema %}
