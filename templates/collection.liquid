<div class="collection-page">
  <div class="container">
    
    <!-- Collection Header -->
    <div class="collection-page__header">
      <h1 class="collection-page__title h1">{{ collection.title }}</h1>
      {% if collection.description != blank %}
        <div class="collection-page__description rte">
          {{ collection.description }}
        </div>
      {% endif %}
    </div>

    <!-- Products Grid -->
    <div class="collection-page__products">
      {% if collection.products.size > 0 %}
        <div class="products-grid">
          {% for product in collection.products %}
            <div class="product-card" data-aos="fade-up" data-aos-delay="{{ forloop.index0 | times: 50 | modulo: 300 }}">
              <a href="{{ product.url }}" class="product-card__link">
                <div class="product-card__image">
                  {% if product.featured_image %}
                    <img src="{{ product.featured_image | img_url: '500x' }}" 
                         alt="{{ product.title }}"
                         loading="lazy">
                  {% else %}
                    {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                </div>
                <div class="product-card__info">
                  <h3 class="product-card__title">{{ product.title }}</h3>
                  <div class="product-card__price">
                    {% if product.compare_at_price > product.price %}
                      <span class="product-card__price-compare">{{ product.compare_at_price | money }}</span>
                    {% endif %}
                    <span class="product-card__price-current">{{ product.price | money }}</span>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
        </div>

        <!-- Pagination -->
        {% if paginate.pages > 1 %}
          <div class="pagination">
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" class="pagination__link">← Anterior</a>
            {% endif %}
            
            <span class="pagination__info">
              Página {{ paginate.current_page }} de {{ paginate.pages }}
            </span>
            
            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" class="pagination__link">Siguiente →</a>
            {% endif %}
          </div>
        {% endif %}
      {% else %}
        <div class="collection-page__empty">
          <p>No hay productos en esta colección.</p>
        </div>
      {% endif %}
    </div>

  </div>
</div>

<style>
  .collection-page {
    padding: 120px 0 var(--spacing-xl);
  }
  
  .collection-page__header {
    text-align: center;
    margin-bottom: var(--spacing-lg);
  }
  
  .collection-page__description {
    max-width: 700px;
    margin: 0 auto;
  }
  
  .products-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
  
  @media (min-width: 768px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (min-width: 1024px) {
    .products-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  .product-card {
    background-color: var(--color-white);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: var(--transition);
  }
  
  .product-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }
  
  .product-card__link {
    display: block;
    text-decoration: none;
    color: inherit;
  }
  
  .product-card__image {
    aspect-ratio: 1;
    overflow: hidden;
  }
  
  .product-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
  }
  
  .product-card:hover .product-card__image img {
    transform: scale(1.05);
  }
  
  .product-card__info {
    padding: var(--spacing-md);
  }
  
  .product-card__title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
  }
  
  .product-card__price {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
  }
  
  .product-card__price-current {
    font-size: 1.5rem;
    font-weight: 700;
    font-family: var(--font-heading);
    color: var(--color-dark);
  }
  
  .product-card__price-compare {
    font-size: 1.125rem;
    color: var(--color-text-light);
    text-decoration: line-through;
  }
  
  .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
  }
  
  .pagination__link {
    padding: 0.75rem 1.5rem;
    background-color: var(--color-primary);
    color: var(--color-white);
    border-radius: var(--radius-sm);
    font-weight: 600;
    transition: var(--transition);
  }
  
  .pagination__link:hover {
    background-color: #4a7082;
  }
  
  .collection-page__empty {
    text-align: center;
    padding: var(--spacing-xl) 0;
  }
</style>
